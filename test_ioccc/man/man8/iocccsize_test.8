.\" section 8 man page for iocccsize_test.sh
.\"
.\" This man page was first written by Cody Boone Ferguson for the IOCCC
.\" in 2022.
.\"
.\" Humour impairment is not virtue nor is it a vice, it's just plain
.\" wrong: almost as wrong as JSON spec mis-features and C++ obfuscation! :-)
.\"
.\" "Share and Enjoy!"
.\"     --  Sirius Cybernetics Corporation Complaints Division, JSON spec department. :-)
.\"
.TH iocccsize_test.sh 8 "21 January 2023" "iocccsize_test" "IOCCC tools"
.SH NAME
iocccsize_test.sh \- test iocccsize tool
.SH SYNOPSIS
\fBiocccsize_test.sh\fP [\-h] [\-v lvl] [\-V] [\-i iocccsize] [\-w work_dir] [\-l limit] [\-Z topdir] [\-I iocccsize_args]
.SH DESCRIPTION
\fBiocccsize_test.sh\fP runs a series of tests on the \fBiocccsize(1)\fP tool, verifying that it is functioning properly.
.SH OPTIONS
.TP
\fB\-h\fP
Show help and exit.
.TP
\fB\-v \fIlevel\fP\fP
Set verbosity level to \fIlevel\fP.
.RS
.PP
A verbosity level of 1 or more will show the PASS or FAIL of individual tests.
.br
A verbosity level of 3 or more will show details such as what was expected and what was discovered during each test.
.RE
.TP
\fB\-V\fP
Print version and exit.
.TP
\fB\-i \fIiocccsize\fP\fP
Set iocccsize path to \fIiocccsize\fP (def: ./iocccsize).
.TP
\fB\-w \fIwork_dir\fP\fP
Set working directory that is removed and rebuilt during the test of the iocccsize tool (def: ./test_iocccsize).
.TP
\fB\-l\fP \fIlimit\fP
Set path to an executable shell script with the correct specific limits extracted from various files (def: ./limit_ioccc.sh).
.RS
.PP
A limit of \fI.\fP (dot) will disable use of an executable shell script.
.RE
.TP
\fB\-Z\fP \fItopdir\fP
Declare the top level directory of this repository.
The \fBtopdir\fP directory must contain the source file \fImkiocccentry.c\fP.
By default, the source file \fImkiocccentry.c\fP is searched for in the current directory,
and then the parent of current directory.
.sp 1
If \fB\-Z\fP \fItopdir\fP is used on the command line, then the source file \fImkiocccentry.c\fP need not exist
in the \fBtopdir\fP directory.
If \fB\-Z\fP \fItopdir\fP is not used on the command line, and the source file \fImkiocccentry.c\fP
is not found in the current directory or the parent of current directory,
then this command exits as if there was a command line error.
.sp 1
Once the \fBtopdir\fP directory is established,
this command moves to that directory.
.TP
\fB\-I \fIiocccsize_args\fP\fP
Set the args to iocccsize.
Don't forget to add \fI\-\-\fP at the end.
.SH EXAMPLES
Run the \fRiocccsize\fP test suite in silent mode, printing only if a problem is discovered:
.PP
.RS
\fB./iocccsize_test.sh\fP
.fi
.RE
.PP
Run the \fRiocccsize\fP test suite, reporting on each sub\-test that is performed:
.RS
.sp
\fB./iocccsize_test.sh \-v 1\fP
.fi
.RE
.PP
You may also wish to try the test script in even more verbose mode:
.PP
.RS
\fB./iocccsize_test.sh \-v 3\fP
.fi
.RE
.SH EXIT STATUS
.TP
0
all OK
.TQ
1
one or more tests failed
.TQ
2
\-h and help string printed or \-V and version string printed
.TQ
3
command line error
.TQ
4
missing or non executable iocccsize
.TQ
5
missing or unreadable limit_ioccc.h
.TQ
>=10
internal error
.SH SEE ALSO
\fBiocccsize(1)\fP
.SH BUGS
.PP
The matched keyword count from \fBiocccsize(1)\fP is currently ignored by the IOCCC
as well as this test suite.
