.TH chkinfo 1 "2 September 2022" "chkinfo" "IOCCC tools"
.SH NAME
chkinfo \- IOCCC tool to validate .info.json file found within an entry directory
.SH SYNOPSIS
\fBchkinfo\fP [\-h] [\-v level] [\-V] [\-q] [\-t] [\-W code] [\-w] file
.SH DESCRIPTION
\fBchkinfo\fP is primarily used by other tools (not humans).
It behaves like \fBfnamchk(1)\fP in that if all is well, it does not print anything and simply exit 0.
If there are problems found with the \fI.info.json\fP file, then warning messages are printed to \fBstderr\fP AND the \fBchkinfo\fP tool exits with a non-zero status.
.PP
The \fBchkinfo\fP tool is primarily a stand alone tool.
As a sanity check, the \fBmkiocccentry(1)\fP program executes \fBchkinfo\fP AFTER the \fI.info.json\fP file has been created and before the compressed tarball is formed.
If \fBmkiocccentry\fP program sees a 0 exit status, then all is well.
For a non-zero exit code, the tool aborts because any problems detected by \fBchkinfo\fP based on what \fBmkiocccentry\fP wrote into \fI.info.json\fP indicates there is a serious mismatch between what \fBmkiocccentry\fP is doing and what \fBchkinfo\fP expects.
.PP
.SH OPTIONS
.PP
\fB\-h\fP
Show help and exit.
.PP
\fB\-v\fP
Set verbosity level.
.PP
\fB\-V\fP
Show version and exit.
.PP
\fB\-q\fP
Quiet mode.
Silence msg(), warn(), warnp() if verbosity level is 0.
.PP
\fB\-W code\fP
Add code to the list of JSON codes to ignore.
To ignore more than one JSON code, use multiple \fB\-W code\fP on the command line.
Note: 0 (which is reserved) notwithstanding the code is in decimal (not octal) despite the fact the codes up through 999 are 0-padded; we explicitly parse the codes as decimal, not octal.
.PP
\fB\-w\fP
Show complete warning information.
Note that this currently is not used but will be in a future commit.
.SH EXIT STATUS
.PP
\fBmain()\fP returns 1 for issues found and 0 for success.
If an error is encountered the end is not reached.
.SH BUGS
.PP
This tool is not finished yet; it depends on the completion of the JSON parser.
.SH EXAMPLES
.PP
.nf
Run the tool on the \fB.info.json\fP file \fItest_work/test-0/.info.json\fP:

.RS
\fB
 ./chkinfo test_work/test-0/.info.json\fP
.fi
.RE
.SH SEE ALSO
.PP
\fBmkiocccentry(1)\fP, \fBchkauth(1)\fP and \fBjparse(1)\fP.
